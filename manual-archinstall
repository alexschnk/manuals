Ручная установка Archlinux

dhcpcd

ping ya.ru

pacman -Syy

cfdisk

mkfs.vfat -F32 /dev/sda1

mkfs.btrfs -f /dev/sda2

mount /dev/sda2 /mnt

btrfs su cr /mnt/@

btrfs su cr /mnt/@home

btrfs su cr /mnt/@.snapshots

umount -R /mnt

mount -o rw,lazytime,compress=zstd,max_inline=256,space_cache=v2,ssd,commit=300,subvol=@ /dev/sda2 /mnt

df -h

mkdir /mnt/{home,.snapshots}

ls /mnt

mount -o rw,lazytime,compress=zstd,max_inline=256,space_cache=v2,ssd,commit=300,subvol=@home /dev/sda2 /mnt/home

mount -o rw,lazytime,compress=zstd,max_inline=256,space_cache=v2,ssd,commit=300,subvol=@.snapshots /dev/sda2 /mnt/.snapshots

mkdir /mnt/boot

mkdir /mnt/boot/efi

mount /dev/sda1 /mnt/boot/efi

ls /mnt/boot

pacstrap -i /mnt base base-devel linux linux-headers linux-firmware dosfstools btrfs-progs intel-ucode iucode-tool archlinux-keyring bluez bluez-utils nano dhcpcd dhclient networkmanager 

+ Драйвера

Графические драйвера Intel

sudo pacman -S mesa mesa-demos xf86-video-intel lib32-mesa vulkan-intel lib32-vulkan-intel vulkan-icd-loader lib32-vulkan-icd-loader network-manager-applet libva-intel-driver lib32-libva-intel-driver

Графические драйвера AMD

sudo pacman -S xf86-video-ati xf86-video-amdgpu mesa mesa-demos lib32-mesa vulkan-radeon lib32-vulkan-radeon vulkan-icd-loader lib32-vulkan-icd-loader amdvlk lib32-amdvlk network-manager-applet

genfstab -U /mnt >> /mnt/etc/fstab

cat /mnt/etc/fstab

arch-chroot /mnt

ln -sf /usr/share/zoneinfo/Europe/Moscow /etc/localtime

hwclock --systohc

nano /etc/locale.gen

Здесь нужно раскомментировать , тоесть убрать решетку # со следующих параметоров

en_US.UTF-8 UTF-8
ru_RU.UTF-8 UTF-8

locale-gen

nano /etc/locale.conf
LANG=ru_RU.UTF-8

nano /etc/vconsole.conf
KEYMAP=ru
FONT=cyr-sun16

nano /etc/hostname
archlinux

nano /etc/hosts
127.0.0.1 localhost
::1              localhost
127.0.0.1 archlinux.localdomain archlinux

mkinitcpio -P

passwd

nano /etc/sudoers
Потом снимаем решетку # со строчки %wheel иногда может быть просто wheel

useradd -m -G wheel -s /bin/bash имя_юзера

passwd имя_юзера

pacman -S grub efibootmgr os-prober mtools

grub-install --target=x86_64-efi  --bootloader-id=grub_uefi --recheck

grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ShefOS --no-nvram --removable /dev/$disk

grub-install --target=x86_64-efi --bootloader-id=GRUB --efi-directory=/boot/efi --removable 

grub-mkconfig -o /boot/grub/grub.cfg

exit

umount -R /mnt

reboot
